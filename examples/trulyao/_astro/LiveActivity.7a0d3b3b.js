import{r as p}from"./index.ed373d49.js";var u={exports:{}},f={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y=p,E=Symbol.for("react.element"),v=Symbol.for("react.fragment"),h=Object.prototype.hasOwnProperty,b=y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,w={key:!0,ref:!0,__self:!0,__source:!0};function _(e,t,o){var s,a={},i=null,l=null;o!==void 0&&(i=""+o),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(s in t)h.call(t,s)&&!w.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)a[s]===void 0&&(a[s]=t[s]);return{$$typeof:E,type:e,key:i,ref:l,props:a,_owner:b.current}}f.Fragment=v;f.jsx=_;f.jsxs=_;u.exports=f;var n=u.exports;p.createContext({listeners:new Set,stateMap:new Map});var S={api:{hostname:"api.lanyard.rest",secure:!0}},N=(e=>(e[e.Event=0]="Event",e[e.Hello=1]="Hello",e[e.Initialize=2]="Initialize",e[e.Heartbeat=3]="Heartbeat",e))(N||{}),g=(e=>(e.INIT_STATE="INIT_STATE",e.PRESENCE_UPDATE="PRESENCE_UPDATE",e))(g||{});function k(e,t){let o={...S,...t},[s,a]=p.useState(),i=`${o.api.secure?"wss":"ws"}://${o.api.hostname}/socket`;return p.useEffect(()=>{if(typeof window>"u")return;if(!("WebSocket"in window||"MozWebSocket"in window))throw new Error("WebSocket connections not supported in this browser.");let l;typeof e=="object"?l={subscribe_to_ids:e}:l={subscribe_to_id:e};let d,r;function m(){d&&clearInterval(d),r=new WebSocket(i),r.addEventListener("open",()=>{console.log("Lanyard: Socket connection opened")}),r.addEventListener("close",m),r.addEventListener("message",x=>{let c=JSON.parse(x.data);switch(c.op){case 1:{d=setInterval(()=>{r.readyState===r.OPEN&&r.send(JSON.stringify({op:3}))},c.d?.heartbeat_interval),r.readyState===r.OPEN&&r.send(JSON.stringify({op:2,d:l}));break}case 0:{switch(c.t){case"INIT_STATE":case"PRESENCE_UPDATE":{c.d&&a(c.d);break}}break}}})}return m(),()=>{clearInterval(d),r.removeEventListener("close",m),r.close()}},[i]),s??o.initialData}const I="1071630966734458952";function T(){const e=k(I);return console.log(e),n.jsx(n.Fragment,{children:e?.listening_to_spotify?n.jsxs("div",{className:"h-32 md:h-28 w-full md:w-max max-w-md bg-emerald-700/10 flex self-stretch border-2 border-emerald-500/60 overflow-hidden transition-all",children:[n.jsx("img",{src:e.spotify?.album_art_url,className:"h-full aspect-square"}),n.jsxs("div",{className:"w-full flex flex-col px-3 py-3",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-souvenir text-base font-bold",children:e.spotify?.song?.length>35?e.spotify?.song?.slice(0,35)+"...":e.spotify?.song}),n.jsx("p",{className:"text-[11px] text-zinc-400 font-medium",children:e.spotify?.artist})]}),n.jsxs("a",{href:`https://open.spotify.com/track/${e.spotify?.track_id}`,className:"bg-emerald-800/20 text-zinc-200 hover:text-current hover:scale-95 text-[10px] font-medium pl-2 pr-3 py-2 self-end mt-auto transition-all",target:"_blank",rel:"noreferrer",children:[n.jsx("img",{src:"https://cdn.simpleicons.org/spotify",className:"w-5 aspect-square inline mr-1"})," Play on Spotify"]})]})]}):null})}export{T as default};
